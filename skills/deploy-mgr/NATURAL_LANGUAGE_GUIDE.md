# Deploy Mgr - 自然语言使用指南

## 🤖 OpenClaw 自然语言调用完整指南

### 识别关键词列表

OpenClaw 通过以下关键词识别你的意图：

#### 动作关键词

| 关键词 | 意图 | 示例 |
|--------|------|------|
| 添加/新增/创建 | 添加部署 | "添加一个新部署" |
| 删除/移除/不用了 | 删除部署 | "删除这个部署" |
| 查看/显示/列出 | 查看/列表 | "查看所有部署" |
| 启动/运行/启动 | 启动服务 | "启动 api 服务" |
| 停止/关闭/停掉 | 停止服务 | "停止 api 服务" |
| 重启/重新启动 | 重启服务 | "重启 api 服务" |
| 状态/怎么样/是否运行 | 查看状态 | "查看 api 的状态" |
| 日志/错误/运行日志 | 查看日志 | "查看 api 的日志" |
| 更新/修改 | 更新配置 | "更新 api 的配置" |

#### 参数关键词

| 参数 | 关键词 | 示例 |
|------|--------|------|
| 项目名称 | 项目名/服务名/应用名/名称 | "项目名是 myapp" |
| 服务器 | 服务器/主机/地址/IP | "服务器是 ws.flys.fun" |
| 用户名 | 用户/用户名 | "用户 root" |
| 部署路径 | 部署路径/项目路径/目录 | "部署路径 /var/www" |
| 启动命令 | 启动命令/运行命令 | "启动命令 npm start" |
| 停止命令 | 停止命令 | "停止命令 npm stop" |
| 日志路径 | 日志路径/日志文件 | "日志路径 /var/log/app.log" |
| 认证方式 | SSH 密钥/密码/密钥文件 | "使用 SSH 密钥 ~/.ssh/id_rsa" |

---

## 💬 完整对话示例集

### 基础操作类

#### 对话 1: 首次使用
```
你: 我有台服务器，想在上面部署个应用

OpenClaw: 好的，我可以帮你管理远程部署。需要配置一些信息。
         你想部署什么应用？项目名称是什么？

你: 项目叫 api-server，部署在 ws.flys.fun 上

OpenClaw: 了解。还需要更多信息：
         1. 用户名是什么？
         2. 部署在哪里？（比如 /var/www/api-server）

你: 用户 root，部署在 /var/www/api-server

OpenClaw: 启动命令是什么？日志放在哪里？

你: 启动命令是 Python app.py，日志在 /var/log/api-server/app.log

OpenClaw: 用什么方式认证？SSH 密钥还是密码？

你: 用 SSH 密钥 ~/.ssh/id_rsa

OpenClaw: ✓ 配置完成！已添加部署：api-server
         现在可以启动它了，需要我启动吗？
```

#### 对话 2: 快速添加
```
你: 添加一个部署：项目名 web，服务器 192.168.1.100，
    用户 deploy，路径 /opt/web，启动命令 ./start.sh，
    用密码 admin123

OpenClaw: ✓ 部署添加成功！
         - 项目: web
         - 服务器: 192.168.1.100
         - 路径: /opt/web
```

### 日常运维类

#### 对话 3: 日常检查
```
你: 看看我的服务状态

OpenClaw: ================================================================================
         ID    Name                 Host                      Status
         ================================================================================
         1     api                  ws.flys.fun               🟢 Running
         2     web                  ws.flys.fun               🔴 Stopped
         3     worker               ws.flys.fun               🟢 Running

         Total: 3 deployment(s)
         注意: web 服务已停止
```

#### 对话 4: 快速查询
```
你: api 怎么样了？

OpenClaw: 正在检查 api 的状态...
         ================================================================================
         Status: api
         ================================================================================
         ✅ Status:  RUNNING
         📝 Message: Found 1 process(es) matching 'api'
         ================================================================================

api 正常运行中。
```

### 服务控制类

#### 对话 5: 服务启动
```
你: 把 web 服务启动一下

OpenClaw: 正在启动 web 服务...
         ================================================================================
         Start Service: web
         ================================================================================
         ✅ Service started successfully!
         📝 Message: Server started on port 8080
         ================================================================================

web 服务已启动并正常运行。
```

#### 对话 6: 服务停止
```
你: 停止 worker 服务

OpenClaw: 正在停止 worker 服务...
         ================================================================================
         Stop Service: worker
         ================================================================================
         ✅ Service stopped successfully!
         📝 Message: Gracefully stopped
         ================================================================================

worker 服务已停止。
```

#### 对话 7: 服务重启
```
你: api 需要重启一下

OpenClaw: 正在重启 api 服务...
         ================================================================================
         Restart Service: api
         ================================================================================
         ⏹️  停止服务...
         ✅ 已停止

         ▶️  启动服务...
         ✅ 已启动

         ✅ Service restarted successfully!
         📝 Message: Server restarted
         ================================================================================

api 服务重启完成，现在正常运行。
```

### 日志诊断类

#### 对话 8: 查看日志
```
你: 查看一下 api 的日志

OpenClaw: 正在读取 api 的日志（最近 100 行）...
         ================================================================================
         Logs: api
         File: /var/log/api/app.log
         ================================================================================
         [INFO] 2026-02-20 13:00:00 - Server started
         [INFO] 2026-02-20 13:00:01 - Connected to database
         [INFO] 2026-02-20 13:00:02 - Ready to accept connections
         [INFO] 2026-02-20 13:01:30 - Request processed successfully
         [INFO] 2026-02-20 13:01:45 - Request processed successfully
         ================================================================================
```

#### 对话 9: 查看错误
```
你: api 最近有没有报错？

OpenClaw: 正在检查 api 的错误日志...
         ================================================================================
         Error Logs: api
         ================================================================================
         最近 100 行日志中未发现错误记录

         服务运行正常，没有错误。
```

#### 对话 10: 指定行数
```
你: 只有看最近 50 行就够了

OpenClaw: ================================================================================
         Logs: api (Last 50 lines)
         File: /var/log/api/app.log
         ================================================================================
         [显示最近 50 行日志...]
         ================================================================================
```

### 批量操作类

#### 对话 11: 批量查看
```
你: 我的服务都什么情况？

OpenClaw: 正在检查所有服务状态...
         ================================================================================
         部署状态总览
         ================================================================================

         🟢 api            - Running (ws.flys.fun)
         🔴 web            - Stopped (ws.flys.fun)
         🟢 worker         - Running (ws.flys.fun)
         🟢 db             - Running (db-server.com)

         总计: 4 个服务
         运行中: 3 个
         已停止: 1 个

         ⚠️  web 服务已停止，需要启动吗？
```

#### 对话 12: 批量重启
```
你: 把所有服务都重启一遍

OpenClaw: 正在批量重启服务...
         确认要以下服务全部重启吗？

         ✓ api (ws.flys.fun)
         ✓ web (ws.flys.fun)
         ✓ worker (ws.flys.fun)

         输入 'yes' 确认，或 'no' 取消。

你: yes

OpenClaw: 开始批量重启...

         [1/3] 正在重启 api... ✓ 完成
         [2/3] 正在重启 web... ✓ 完成
         [3/3] 正在重启 worker... ✓ 完成

         ✅ 所有服务重启完成！

         当前状态:
         🟢 api            - Running
         🟢 web            - Running
         🟢 worker         - Running
```

### 故障处理类

#### 对话 13: 服务挂了
```
你: web 服务好像挂了，帮我看看

OpenClaw: 正在检查 web 服务状态...
         ================================================================================
         Status: web
         ================================================================================
         🔴 Status:  STOPPED
         📝 Message: Service is not running
         ================================================================================

web 服务确实已停止。需要我重启吗？

你: 好的，重启一下

OpenClaw: 正在重启 web 服务...
         ================================================================================
         Restart Service: web
         ================================================================================
         ✅ Service restarted successfully!
         📝 Message: Service is back online
         ================================================================================

web 服务已恢复正常。
```

#### 对话 14: 看看最近有什么问题
```
你: 最近 api 有没有什么异常？

OpenClaw: 正在检查 api 服务的状态和日志...
         ================================================================================
         Status: api
         ================================================================================
         ✅ Status:  RUNNING
         📝 Message: Service is healthy
         ================================================================================

         正在检查最近日志...
         ================================================================================
         Logs: api (Last 200 lines)
         ================================================================================
         [INFO] 2026-02-20 12:50:00 - Request processed: /api/users
         [WARN] 2026-02-20 12:51:15 - Slow query detected (2000ms)
         [INFO] 2026-02-20 12:52:00 - Request processed: /api/orders
         [WARN] 2026-02-20 12:53:30 - Slow query detected (2500ms)
         [INFO] 2026-02-20 12:54:00 - Request processed: /api/users
         [INFO] 2026-02-20 12:55:00 - Request processed: /api/orders
         ================================================================================

         服务运行正常，但检测到 2 个慢查询警告。
         建议检查数据库性能。
```

### 配置管理类

#### 对话 15: 查看配置
```
你: api 的配置是什么？

OpenClaw: ================================================================================
         Deployment: api
         ================================================================================
         ID:              1
         Host:            ws.flys.fun:22
         Username:        root
         Deploy Path:     /var/www/api
         Start Command:   python app.py
         Stop Command:    pkill -f 'python app.py'
         Log Path:        /var/log/api/app.log
         Description:     API 服务
         Created:         2026-02-20 10:00:00
         ================================================================================
```

#### 对话 16: 更新配置
```
你: api 的部署路径改了，现在是 /opt/api

OpenClaw: 正在更新 api 部署...
         ✓ 部署路径已更新：/opt/api

         其余配置：
         - 服务器: ws.flys.fun
         - 启动命令: python app.py
```

#### 对话 17: 删除部署
```
你: test 项目不用了，删掉吧

OpenClaw: 确认删除部署 "test"？
         此操作不可撤销。输入 'yes' 确认，或 'no' 取消。

你: yes

OpenClaw: ✓ 部署 "test" 已删除
```

### 实际工作流类

#### 对话 18: 部署新版本
```
你: 帮我部署新版本的 api

OpenClaw: 好的，我理解你要更新 api 服务。

         部署流程建议：
         1. 先停止当前服务
         2. 上传新版本代码
         3. 启动新版本服务
         4. 验证服务状态

         我可以帮你做第 1 和第 4 步。

         现在开始吗？

你: 可以

OpenClaw: 正在停止 api 服务...
         ================================================================================
         Stop Service: api
         ================================================================================
         ✅ Service stopped successfully!
         ================================================================================

         ✓ api 已停止，现在可以上传新代码了。
           上传完成后，告诉我，我会帮你启动新版本。
```

```
（在上传新代码后...）

你: 新代码已经上传好了，帮我启动

OpenClaw: 正在启动 api 服务...
         ================================================================================
         Start Service: api
         ================================================================================
         ✅ Service started successfully!
         📝 Message: New version started on port 3000
         ================================================================================

         ✓ 新版本已启动！

         正在验证服务状态...
         ================================================================================
         Status: api
         ================================================================================
         ✅ Status:  RUNNING
         📝 Message: Service is healthy
         ================================================================================

         ✅ 新版本部署成功并正常运行！
```

#### 对话 19: 日常巡检
```
你: 帮我巡检一下所有服务

OpenClow: 正在执行服务巡检...

         ================================================================================
         服务巡检报告
         ================================================================================

         【api】 ws.flys.fun
         ├─ 状态: ✅ 运行中
         ├─ 进程数: 1
         ├─ 最近日志: 正常
         └─ 结论: 健康 ✅

         【web】 ws.flys.fun
         ├─ 状态: ❌ 已停止
         ├─ 进程数: 0
         ├─ 最近日志: 服务已停止
         └─ 结论: 异常 ⚠️

         【worker】 ws.flys.fun
         ├─ 状态: ✅ 运行中
         ├─ 进程数: 3
         ├─ 最近日志: 正常
         └─ 结论: 健康 ✅

         ================================================================================
         巡检结果:
         ✓ 正常运行: 2 个
         ⚠️  需要关注: 1 个 (web 已停止)
         ================================================================================

         建议: web 服务已停止，是否需要启动？
```

---

## 💡 使用技巧

### 技巧 1: 简洁表达
```
好: 启动 api
好: api 状态？
好: 列出所有部署

避免: 我的那个在 ws.flys.fun 上面的 api 服务的
      具体运行情况现在是什么样子的呢？
```

### 技巧 2: 使用项目名
```
推荐:
- "查看 api 的状态"
- "启动 api"
- "删除 api"

避免:
- "查看第一个"
- "启动那个 1.2.3.4 的"
```

### 技巧 3: 一次性表达完整信息
```
好: 添加 deploy-app 到 server.com，用户 deploy，
    路径 /opt/deploy-app，启动命令 ./start.sh

避免: 
- 你: 添加一个部署
- 我: 需要什么信息？
- 你: deploy-app
- 我: 服务器？
- 你: server.com
- I: ...
```

### 技巧 4: 分步骤处理复杂任务
```
对于复杂操作，可以分多次对话：

你: 列出所有服务
(I 显示列表)

你: 把 api 停了
(I 执行停止)

你: 新代码上传好了，启动 api
(I 执行启动)
```

---

## 🎯 最佳实践

### 第一次使用
1. 先添加一个部署
2. 测试连接是否正常
3. 练习常用的命令操作
4. 熟悉日志查看

### 日常使用
1. 定期使用"检查状态"命令巡检
2. 出现问题时先看日志
3. 批量操作前先确认列表
4. 重要操作（如删除）确认后再执行

### 故障排查
1. 先查看状态确认是否运行
2. 查看最近的错误日志
3. 尝试重启服务
4. 如果持续失败，检查配置

---

## ❓ 常见问题解答

**Q: 记不住命令怎么办？**
A: 直接用自然语言描述，比如"我想做什么"，OpenClaw 会自动识别。

**Q: 如何快速添加多个部署？**
A: 可以一次性描述，也可以分多次添加。推荐一次添加一个配置完整的。

**Q: 服务启动失败怎么办？**
A: 查看日志找原因，检查启动命令是否正确，确认路径和权限。

**Q: 如何批量操作？**
A: 使用"所有..."、"每个..."等词汇，或者明确列出项目名。

**Q: 忘记项目名了怎么办？**
A: 用"列出所有部署"或"显示所有服务"查看完整列表。

---

**版本**: 1.0.0
**更新**: 2026-02-20
